<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Map UI Prototype</title>
    <style>
      :root {
        --bg: #11131a;
        --panel-1: #161923;
        --panel-2: #1d2130;
        --panel-3: #1b1f2c;
        --border: #22273a;
        --text: #f6f7fb;
        --text-muted: #a8b0c3;
        --accent: #3b82f6;
        --accent-soft: rgba(59, 130, 246, 0.08);
        --warn: #f97316;
        --radius: 12px;
        --gap: 16px;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 32px;
      }

      [hidden] {
        display: none !important;
      }

      .screen {
        width: min(1400px, 100%);
        display: grid;
        grid-template-rows: auto 1fr auto;
        gap: var(--gap);
      }

      .header,
      .footer {
        background: var(--panel-1);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 18px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .badge {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        background: var(--accent-soft);
        color: var(--accent);
      }

      .header-actions {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .btn {
        all: unset;
        cursor: pointer;
        border-radius: 8px;
        background: var(--accent);
        padding: 10px 16px;
        font-size: 14px;
        font-weight: 600;
        transition: transform 150ms ease, box-shadow 150ms ease;
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 30px rgba(59, 130, 246, 0.2);
      }

      .btn.secondary {
        background: transparent;
        border: 1px solid rgba(59, 130, 246, 0.4);
        color: var(--accent);
      }

      .btn.secondary:hover {
        box-shadow: none;
        background: rgba(59, 130, 246, 0.12);
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        position: relative;
      }

      .status-dot.on {
        background: #22c55e;
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
      }

      .content {
        display: grid;
        grid-template-columns: 0.26fr 0.48fr 0.26fr;
        gap: var(--gap);
      }

      .panel {
        background: var(--panel-1);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .panel.secondary {
        background: var(--panel-2);
      }

      .toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }

      .toolbar input {
        flex: 1;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--panel-3);
        color: var(--text);
        font-size: 14px;
      }

      .tree {
        margin: 0;
        padding: 0;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 6px;
        font-size: 14px;
      }

      .tree-item {
        padding: 10px 12px;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        transition: background 150ms ease;
        cursor: pointer;
      }

      .tree-item:hover {
        background: rgba(248, 250, 252, 0.05);
      }

      .tree-item.active {
        background: linear-gradient(90deg, #1f293d, #1a2140);
        border: 1px solid rgba(59, 130, 246, 0.3);
      }

      .tree-item .meta {
        font-size: 12px;
        color: var(--text-muted);
      }

      .breadcrumb {
        font-size: 13px;
        color: var(--text-muted);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .file-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .file-name {
        font-size: 18px;
        font-weight: 600;
      }

      .chip {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        background: rgba(15, 118, 110, 0.25);
        color: #5eead4;
      }

      .symbol-group {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .symbol-card {
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 14px 16px;
        background: var(--panel-3);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .symbol-card.header {
        border-left: 3px solid var(--accent);
      }

      .symbol-title {
        display: flex;
        align-items: baseline;
        gap: 12px;
        font-weight: 600;
        font-size: 15px;
      }

      .symbol-meta {
        font-size: 12px;
        color: var(--text-muted);
        display: flex;
        gap: 16px;
      }

      .methods {
        margin: 0;
        padding-left: 18px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        font-size: 13px;
      }

      .methods li {
        color: var(--text-muted);
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .method-name {
        color: #7dd3fc;
        font-weight: 500;
      }

      .method-desc {
        font-size: 12px;
        color: rgba(248, 250, 252, 0.65);
      }

      .error-banner {
        border-radius: 10px;
        background: rgba(249, 115, 22, 0.1);
        border: 1px solid rgba(249, 115, 22, 0.4);
        padding: 12px 14px;
        font-size: 13px;
        display: flex;
        gap: 12px;
      }

      .filters {
        display: grid;
        gap: 16px;
      }

      .filter-card {
        background: var(--panel-3);
        border-radius: 10px;
        border: 1px solid var(--border);
        padding: 14px 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .filter-card h3 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.4px;
        text-transform: uppercase;
        color: var(--text-muted);
      }

      .filter-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        font-size: 13px;
      }

      .event-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        font-size: 13px;
      }

      .event-item {
        display: flex;
        justify-content: space-between;
        background: rgba(59, 130, 246, 0.07);
        border-radius: 8px;
        padding: 10px 12px;
        border: 1px solid rgba(59, 130, 246, 0.15);
      }

      .event-item.deleted {
        background: rgba(249, 115, 22, 0.08);
        border-color: rgba(249, 115, 22, 0.25);
      }

      .footer {
        font-size: 12px;
        color: var(--text-muted);
      }

      .settings-main {
        background: var(--panel-1);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 28px;
        display: grid;
        gap: 24px;
      }

      .settings-intro {
        display: flex;
        flex-direction: column;
        gap: 8px;
        color: var(--text-muted);
        font-size: 14px;
      }

      .settings-intro h1 {
        margin: 0;
        font-size: 22px;
        color: var(--text);
      }

      .settings-grid {
        display: grid;
        gap: 20px;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      }

      .settings-card {
        background: var(--panel-2);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 20px 22px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .settings-card h2 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
      }

      .settings-card p {
        margin: 0;
        font-size: 13px;
        color: var(--text-muted);
      }

      .settings-card hr {
        border: none;
        border-top: 1px solid var(--border);
      }

      .setting-field {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        align-items: flex-start;
        flex-wrap: wrap;
      }

      .setting-field > div:first-child {
        flex: 1 1 200px;
      }

      .setting-label {
        font-size: 14px;
        font-weight: 500;
      }

      .setting-description {
        margin-top: 4px;
        font-size: 12px;
        color: var(--text-muted);
      }

      .setting-control {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
        flex: 1 1 260px;
      }

      .setting-control input[type="text"] {
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--panel-3);
        color: var(--text);
        flex: 1 1 260px;
        min-width: 220px;
        max-width: 100%;
      }

      .setting-control select {
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--panel-3);
        color: var(--text);
        flex: 1 1 220px;
        min-width: 180px;
      }

      .setting-control button {
        all: unset;
        padding: 8px 14px;
        border-radius: 8px;
        border: 1px solid rgba(59, 130, 246, 0.4);
        color: var(--accent);
        cursor: pointer;
        font-size: 13px;
        white-space: nowrap;
      }

      .setting-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 14px;
        background: var(--panel-3);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 12px 14px;
        font-size: 13px;
        color: var(--text-muted);
      }

      .setting-toggle strong {
        color: var(--text);
        display: block;
        margin-bottom: 4px;
        font-size: 14px;
      }

      .setting-toggle span {
        display: block;
        font-size: 12px;
      }

      .setting-toggle input {
        transform: scale(1.1);
      }

      .settings-tags {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .settings-tag {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        background: rgba(59, 130, 246, 0.12);
        color: var(--accent);
      }

      @media (max-width: 1280px) {
        body {
          padding: 20px;
        }
        .content {
          grid-template-columns: 0.3fr 0.7fr;
        }
        .inspector {
          display: none;
        }
      }

      @media (max-width: 1024px) {
        .content {
          grid-template-columns: 1fr;
        }
        .sidebar {
          order: 2;
        }
        .main {
          order: 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="screen" id="dashboard">
      <header class="header">
        <div class="header-left">
          <div style="font-weight: 600; letter-spacing: 1px">&lt;/&gt; CODE MAP</div>
          <span class="badge">python-only</span>
          <div style="display: flex; align-items: center; gap: 8px; font-size: 12px">
            <div class="status-dot on"></div>
            Watcher activo
          </div>
        </div>
        <div class="header-actions">
          <button class="btn secondary" id="open-settings">Settings</button>
          <button class="btn" id="rescan-btn">Rescan (Ctrl+R)</button>
        </div>
      </header>

      <div class="content">
        <aside class="panel sidebar">
          <div class="toolbar">
            <input type="search" placeholder="Filtrar archivos…" />
            <span style="font-size: 12px; color: var(--text-muted)">42 archivos</span>
          </div>
          <ul class="tree">
            <li class="tree-item">
              <span>src</span>
              <span class="meta">8 carpetas</span>
            </li>
            <li class="tree-item">
              <span>src/api</span>
              <span class="meta">6 archivos</span>
            </li>
            <li class="tree-item active">
              <div style="display: flex; flex-direction: column; gap: 4px">
                <span>src/services/payments.py</span>
                <span class="meta">3 clases · 6 métodos · 2 funciones</span>
              </div>
              <span style="font-size: 11px; color: var(--accent)">●</span>
            </li>
            <li class="tree-item">
              <div style="display: flex; flex-direction: column; gap: 4px">
                <span>src/utils/maths.py</span>
                <span class="meta">0 clases · 4 funciones</span>
              </div>
              <span class="meta">mod ayer</span>
            </li>
            <li class="tree-item">
              <span>tests/test_payments.py</span>
              <span class="meta">1 clase</span>
            </li>
          </ul>
        </aside>

        <main class="panel secondary main">
          <div class="breadcrumb">
            <span>src</span> › <span>services</span> › <span>payments.py</span>
          </div>
          <div class="file-header">
            <div>
              <div class="file-name">payments.py</div>
              <div style="font-size: 13px; color: var(--text-muted)">
                Última modificación: hace 3 minutos · 210 líneas
              </div>
            </div>
            <span class="chip">sin errores</span>
          </div>

          <section class="symbol-group">
            <div class="symbol-card header">
              <div class="symbol-title">
                <span>class PaymentProcessor</span>
                <small style="color: var(--text-muted)">línea 12 · 3 métodos</small>
              </div>
              <p class="method-desc" style="margin: 0; font-size: 13px">
                Gestiona la orquestación de pagos con proveedores externos, maneja
                reintentos y conciliación.
              </p>
              <ul class="methods">
                <li>
                  <span class="method-name">def __init__(self, gateway: Gateway)</span>
                  <span class="method-desc">
                    Configura el gateway activo, inicializa métricas y deja lista la
                    sesión de pago.
                  </span>
                </li>
                <li>
                  <span class="method-name">def charge(self, order: Order) -> Receipt</span>
                  <span class="method-desc">
                    Envía el cargo al proveedor seleccionado, maneja reintentos y
                    devuelve un recibo normalizado.
                  </span>
                </li>
                <li>
                  <span class="method-name">async def reconcile(self) -> None</span>
                  <span class="method-desc">
                    Sincroniza transacciones pendientes contra el ledger remoto y
                    marca discrepancias para revisión.
                  </span>
                </li>
              </ul>
            </div>

            <div class="symbol-card header">
              <div class="symbol-title">
                <span>class RefundService</span>
                <small style="color: var(--text-muted)">línea 54 · 2 métodos</small>
              </div>
              <p class="method-desc" style="margin: 0; font-size: 13px">
                Procesa solicitudes de reembolso y actualiza el inventario asociado.
              </p>
              <ul class="methods">
                <li>
                  <span class="method-name">def request(self, order_id: str, amount: Decimal)</span>
                  <span class="method-desc">
                    Genera la entrada de reembolso y la encola para conciliación con el
                    proveedor correspondiente.
                  </span>
                </li>
                <li>
                  <span class="method-name">def audit(self) -> list[Refund]</span>
                  <span class="method-desc">
                    Devuelve la lista de reembolsos completados y pendientes para la
                    auditoría semanal.
                  </span>
                </li>
              </ul>
            </div>

            <div class="symbol-card">
              <div class="symbol-title">
                <span class="method-name">def format_receipt(receipt: Receipt) -> str</span>
                <small style="color: var(--text-muted)">línea 102 · función</small>
              </div>
              <p class="method-desc" style="margin: 0; font-size: 13px">
                Devuelve una representación de texto amigable para el usuario con los
                datos clave del recibo.
              </p>
            </div>

            <div class="error-banner" style="display: none">
              <span style="color: var(--warn)">⚠</span>
              <span>Error de sintaxis en línea 140 · se omitieron los símbolos.</span>
            </div>
          </section>
        </main>

        <aside class="panel inspector">
          <div class="filter-card">
            <h3>búsqueda global (Ctrl+K)</h3>
            <input
              type="search"
              placeholder="Buscar símbolos…"
              style="
                padding: 10px 12px;
                border-radius: 8px;
                border: 1px solid var(--border);
                background: var(--panel-1);
                color: var(--text);
              "
            />
          </div>

          <div class="filter-card">
            <h3>filtros</h3>
            <div class="filter-list">
              <label><input type="checkbox" checked /> Clases</label>
              <label><input type="checkbox" checked /> Métodos</label>
              <label><input type="checkbox" checked /> Funciones</label>
              <label><input type="checkbox" /> Solo archivos con símbolos</label>
              <label><input type="checkbox" /> Docstrings extendidos</label>
            </div>
          </div>

          <div class="filter-card">
            <h3>actividad reciente</h3>
            <div class="event-list">
              <div class="event-item">
                <span>src/services/payments.py</span>
                <span style="color: var(--text-muted)">mod · hace 2m</span>
              </div>
              <div class="event-item deleted">
                <span>src/legacy/billing.py</span>
                <span style="color: var(--text-muted)">del · hace 7m</span>
              </div>
              <div class="event-item">
                <span>tests/test_payments.py</span>
                <span style="color: var(--text-muted)">mod · hace 12m</span>
              </div>
            </div>
          </div>

          <div class="filter-card">
            <h3>ajustes rápidos</h3>
            <div class="filter-list">
              <label><input type="checkbox" checked /> Auto-refresh</label>
              <label><input type="checkbox" checked /> Mostrar cambios en vivo</label>
              <label><input type="checkbox" /> Tema claro</label>
            </div>
          </div>
        </aside>
      </div>

      <footer class="footer">
        <span>Code Map · build 0.1.0</span>
        <span>Docs · Shortcuts · Estado API</span>
      </footer>
    </div>

    <div class="screen settings-view" id="settings" hidden>
      <header class="header">
        <div class="header-left">
          <div style="font-weight: 600; letter-spacing: 1px">SETTINGS</div>
          <span class="badge">beta</span>
        </div>
        <div class="header-actions">
          <button class="btn secondary" id="back-dashboard">Volver al overview</button>
          <button class="btn">Guardar cambios</button>
        </div>
      </header>

      <div class="settings-main">
        <div class="settings-intro">
          <h1>Preferencias del workspace</h1>
          <p>
            Configura la ruta raíz, el watcher y la interfaz antes de conectar la UI
            con el backend.
          </p>
          <div class="settings-tags">
            <span class="settings-tag">workspace</span>
            <span class="settings-tag">watcher</span>
            <span class="settings-tag">ui</span>
          </div>
        </div>

        <div class="settings-grid">
          <div class="settings-card">
            <h2>Ruta del proyecto</h2>
            <p>Define el directorio que se analizará automáticamente.</p>
            <div class="setting-field">
              <div>
                <div class="setting-label">Ruta raíz actual</div>
                <div class="setting-description">~/projects/my-app</div>
              </div>
              <div class="setting-control">
                <input type="text" value="~/projects/my-app" id="root-input" />
                <button>Cambiar...</button>
              </div>
            </div>
            <hr />
            <div class="setting-field">
              <div>
                <div class="setting-label">Excluir directorios</div>
                <div class="setting-description">
                  Ignorados durante escaneos y watcher
                </div>
              </div>
              <div class="settings-tags">
                <span class="settings-tag">.venv</span>
                <span class="settings-tag">__pycache__</span>
                <span class="settings-tag">node_modules</span>
              </div>
            </div>
          </div>

          <div class="settings-card">
            <h2>Watcher y sincronización</h2>
            <p>Controla cómo se aplican los cambios en tiempo real.</p>
            <div class="setting-toggle">
              <div>
                <strong>Watcher activo</strong>
                <span>Reescanea en cuanto se detectan eventos del sistema de archivos.</span>
              </div>
              <input type="checkbox" checked />
            </div>
            <div class="setting-toggle">
              <div>
                <strong>Auto-rescan</strong>
                <span>Fuerza un escaneo completo cada vez que cambias de rama.</span>
              </div>
              <input type="checkbox" />
            </div>
            <div class="setting-toggle">
              <div>
                <strong>Persistir snapshots</strong>
                <span>Guarda los análisis en .code-map para acelerar el arranque.</span>
              </div>
              <input type="checkbox" checked />
            </div>
          </div>

          <div class="settings-card">
            <h2>Visualización</h2>
            <p>Ajusta cómo se muestran símbolos y docstrings en la UI.</p>
            <div class="setting-field">
              <div>
                <div class="setting-label">Modo de símbolos</div>
                <div class="setting-description">
                  Agrupación por archivo o lista plana
                </div>
              </div>
              <div class="setting-control">
                <select>
                  <option>Carpeta → archivo → símbolo</option>
                  <option>Lista plana por nombre</option>
                </select>
              </div>
            </div>
            <div class="setting-field">
              <div>
                <div class="setting-label">Docstrings</div>
                <div class="setting-description">Nivel de detalle a mostrar</div>
              </div>
              <div class="setting-control">
                <select>
                  <option>Primer párrafo</option>
                  <option>Completo</option>
                  <option>Ocultos</option>
                </select>
              </div>
            </div>
            <div class="setting-toggle">
              <div>
                <strong>Tema oscuro</strong>
                <span>Aplica la paleta actual a todo el workspace.</span>
              </div>
              <input type="checkbox" checked />
            </div>
          </div>

          <div class="settings-card">
            <h2>Próximamente</h2>
            <p>Reserva espacio para integraciones y permisos adicionales.</p>
            <div class="settings-tags">
              <span class="settings-tag">integraciones</span>
              <span class="settings-tag">perfiles</span>
              <span class="settings-tag">colaboradores</span>
            </div>
            <div
              style="font-size: 12px; color: var(--text-muted); line-height: 1.6"
            >
              Añadiremos soporte para múltiples workspaces, reglas de exclusión por
              lenguaje y alertas configurables.
            </div>
          </div>
        </div>
      </div>

  <footer class="footer">
    <span>Settings · código experimental</span>
    <span>Último guardado: hace 1 min</span>
  </footer>
</div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const dashboard = document.getElementById("dashboard");
      const settings = document.getElementById("settings");
      const openSettings = document.getElementById("open-settings");
      const backDashboard = document.getElementById("back-dashboard");
      const rootInput = document.getElementById("root-input");

      const showSettings = () => {
        dashboard.hidden = true;
        settings.hidden = false;
        window.scrollTo({ top: 0, behavior: "smooth" });
        if (rootInput) {
          rootInput.focus();
        }
      };

      const showDashboard = () => {
        settings.hidden = true;
        dashboard.hidden = false;
        window.scrollTo({ top: 0, behavior: "smooth" });
      };

      openSettings?.addEventListener("click", (event) => {
        event.preventDefault();
        showSettings();
      });

      backDashboard?.addEventListener("click", (event) => {
        event.preventDefault();
        showDashboard();
      });

    });
  </script>
</body>
</html>
